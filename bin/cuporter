#!/usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)
require 'cuporter'

filter_args = Cuporter::CLI::FilterArgsBuilder.new(Cuporter::CLI::Options[:tags]).args

report = Cuporter::Report.create(Cuporter::CLI::Options[:report], 
                                 Cuporter::CLI::Options[:input_file] || Cuporter::CLI::Options[:input_dir],
                                 filter_args,
                                 Cuporter::CLI::Options[:title])

puts report.xml
__END__
formatter = Cuporter::Formatter::Writer.create(Cuporter::CLI::Options[:format],
                                               report,
                                               Cuporter::CLI::Options[:output],
                                               Cuporter::CLI::Options[:numbers])
formatter.write
