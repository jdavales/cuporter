#!/usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)
require 'cuporter'

report_class = Cuporter.const_get(Cuporter::Options[:report])
report = report_class.new(Cuporter::Options[:input_file] || Cuporter::Options[:input_dir])

formatter_class = Cuporter::Formatters.const_get(Cuporter::Options[:format])
formatter_class.new(report.report_node,
                    Cuporter::Options[:output],
                    Cuporter::Options[:numbers]).write
